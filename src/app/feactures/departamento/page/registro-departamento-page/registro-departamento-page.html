<!-- Modal -->
<div
  id="hs-ai-registro-modal"
  class="hs-overlay hidden fixed inset-0 z-80 flex items-center justify-center bg-gray-900/10"
  role="dialog"
  tabindex="-1"
  aria-labelledby="hs-ai-registro-modal-label"
>
  <div
    class="hs-overlay-open:opacity-100 hs-overlay-open:duration-300 opacity-0 translate-y-4 hs-overlay-open:translate-y-0 ease-out transition-all sm:max-w-lg w-full mx-3"
  >
    <div class="relative bg-white shadow-xl rounded-xl overflow-hidden">
      <!-- Header -->
      <div class="bg-gray-900 px-6 py-4 text-center relative">
        <h2
          id="hs-ai-registro-modal-label"
          class="text-xl font-semibold text-white"
        >
          Registro de Departamentos
        </h2>
        <!-- Close Button -->
        <button
          type="button"
          class="absolute top-3 right-3 p-1 rounded-full text-white/80 hover:bg-white/20"
          aria-label="Cerrar"
          data-hs-overlay="#hs-ai-registro-modal"
        >
          <svg
            class="w-5 h-5"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <!-- End Header -->

      <!-- Body -->
      <div class="p-6">
        <form [formGroup]="formularioRegistro" class="space-y-5">
          <!-- Descripción -->
          <div>
            <label
              for="descripcion"
              class="block text-sm font-medium text-gray-700"
            >
              Descripción del departamento <span class="text-red-500">*</span>
            </label>
            <input
              id="descripcion"
              formControlName="descripcion"
              type="text"
              [class]="'mt-2 py-2 px-3 block w-full border rounded-lg text-sm focus:border-blue-500 focus:ring focus:ring-blue-200 ' + (formularioRegistro.get('descripcion')?.invalid && formularioRegistro.get('descripcion')?.touched ? 'border-red-500' : 'border-gray-300')"
              placeholder="Ej: La libertad"
              [disabled]="isLoading"
            />
            @if (formularioRegistro.get('descripcion')?.invalid && formularioRegistro.get('descripcion')?.touched) {
              <p class="mt-1 text-sm text-red-600">
                @if (formularioRegistro.get('descripcion')?.errors?.['required']) {
                  La descripción es requerida
                }
                @if (formularioRegistro.get('descripcion')?.errors?.['minlength']) {
                  La descripción debe tener al menos 3 caracteres
                }
                @if (formularioRegistro.get('descripcion')?.errors?.['maxlength']) {
                  La descripción no puede exceder 100 caracteres
                }
              </p>
            }
          </div>
        </form>
      </div>
      <!-- End Body -->

      <!-- Footer -->
      <div class="flex justify-end gap-3 px-6 py-4 bg-gray-50">
        <button
          type="button"
          class="px-4 py-2 rounded-lg text-sm font-medium bg-white border border-gray-300 text-gray-700 hover:bg-gray-100"
          (click)="cerrarModal()"
          [disabled]="isLoading"
        >
          Cancelar
        </button>
        <button
          type="button"
          (click)="guardarRegistro()"
          [disabled]="isLoading"
          class="px-4 py-2 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 shadow disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"
        >
          @if (isLoading) {
            <svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Guardando...
          } @else {
            Guardar
          }
        </button>
      </div>
      <!-- End Footer -->
    </div>
  </div>
</div>
<!-- End Modal -->
